{% extends 'base.html' %}

{% block head %}
    <title>Your Purchases</title>
{% endblock %}

{% block body %}
<h2>Here are your purchases:</h2>

{% if purchases|length == 0 %}
    <h4>You have no purchases yet.</h4>
{% else %}
    <table>
        <tr>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Category</th>
            <th>Date</th>
        </tr>
        {% for purchase in purchases %}
        <tr>
            <td>{{ purchase.prodName }}</td>
            <td>{{ purchase.qty }}</td>
            <td>â‚ª{{ purchase.price }}</td>
            <td>{{ purchase.category }}</td>
            <td>{{ purchase.date.strftime('%Y-%m-%d') }}</td>
            <td>
                <a href="/update_purchase/{{purchase.id}}">Update</a>
                <a href="/delete_purchase/{{purchase.id}}" onclick="return confirm('Are you sure you want to delete this purchase?')">Delete</a>
            </td>
        </tr>
        
        {% endfor %}
    </table>
{% endif %}

<h3>Add a New Purchase</h3>
    <form action="{{ url_for('add_purchase') }}" method="post">
        <input type="text" name="prodName" placeholder="Product Name" required>
        <input type="number" name="qty" placeholder="Quantity" required>
        <input type="number" step="0.01" name="price" placeholder="Price" required>
        <input type="text" name="category" placeholder="Category" required>
        <input type="date" name="date" required>
        <button type="submit">Add Purchase</button>
    </form>

{% endblock %}
